--- libwebsockets-4.2.0/CMakeLists.txt~	2021-04-15 18:44:02.000000000 +0200
+++ libwebsockets-4.2.0/CMakeLists.txt	2021-05-23 13:57:51.126039907 +0200
@@ -338,37 +338,6 @@
 # Try to find the current Git hash
 #
 
-find_package(Git)
-if(GIT_EXECUTABLE)
-	execute_process(
-		WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}"
-		COMMAND "${GIT_EXECUTABLE}" describe --tags --always
-		OUTPUT_VARIABLE GIT_HASH
-		OUTPUT_STRIP_TRAILING_WHITESPACE
-		)
-	set(LWS_BUILD_HASH ${GIT_HASH})
-
-	# append the build user and hostname
-	if (NOT LWS_REPRODUCIBLE)
-		execute_process(
-			WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}"
-			COMMAND "whoami"
-			OUTPUT_VARIABLE GIT_USER
-			OUTPUT_STRIP_TRAILING_WHITESPACE
-			)
-		execute_process(
-			WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}"
-			COMMAND "hostname"
-			OUTPUT_VARIABLE GIT_HOST
-			OUTPUT_STRIP_TRAILING_WHITESPACE
-			)
-		string(REGEX REPLACE "([^\\])[\\]([^\\])" "\\1\\\\\\\\\\2" GIT_USER ${GIT_USER})
-		set(LWS_BUILD_HASH ${GIT_USER}@${GIT_HOST}-${GIT_HASH})
-	endif()
-
-	message("Git commit hash: ${LWS_BUILD_HASH}")
-endif()
-
 set(PACKAGE "libwebsockets")
 set(CPACK_RPM_PACKAGE_LICENSE "MIT")
 set(CPACK_PACKAGE_NAME "${PACKAGE}")
@@ -376,10 +345,11 @@
 set(CPACK_PACKAGE_VERSION_MINOR "2")
 set(CPACK_PACKAGE_VERSION_PATCH_NUMBER "0")
 
-set(CPACK_PACKAGE_VERSION_PATCH "${CPACK_PACKAGE_VERSION_PATCH_NUMBER}-${LWS_BUILD_HASH}")
+set(CPACK_PACKAGE_VERSION_PATCH "${CPACK_PACKAGE_VERSION_PATCH_NUMBER}")
 set(CPACK_PACKAGE_RELEASE 1)
 
 set(CPACK_PACKAGE_VERSION "${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}")
+set(LWS_BUILD_HASH ${CPACK_PACKAGE_VERSION})
 set(CPACK_PACKAGE_VENDOR "andy@warmcat.com")
 set(CPACK_PACKAGE_CONTACT "andy@warmcat.com")
 set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "${PACKAGE} ${CPACK_PACKAGE_VERSION}")
